<!DOCTYPE html>
<html>
    <head>
        <title>PlexRecs</title>
        <link href="styles.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <script src="smooth.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <h1>PlexRecs</h1>
            </nav>
        </header>
        <div id="title"></div>
        <div id="heading"></div>
        <div id="id01"></div>

        <script>
            var xmlhttp = new XMLHttpRequest();
            var url = "movies.json";
            var myArr;

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    myArr = JSON.parse(xmlhttp.responseText);
                    catlist(myArr);
                }
            };
            xmlhttp.open("GET", url, true);
            xmlhttp.send();

            function catlist(arr) {
                var out = "";
                var i;
                for(i = 0; i < arr.categories.length; i++) {
                    out += '<a title="' + arr.categories[i].description + '" data-scroll href="#id' + i + '" class="button" onclick="movielist(' + i + ')">' + arr.categories[i].name + '</a>';
                }
                document.getElementById("title").innerHTML = out;
                linker();
            }

            function linker() {
                if(window.location.hash) {
                    movielist(window.location.hash.slice(3));
                    document.getElementById(window.location.hash.slice(1)).scrollIntoView();
                }
            }

            function movielist(j) {
                var out = '';
                var heading = '<h1 id="id' + j + '">' + myArr.categories[j].name + '</h1>';
                document.getElementById("heading").innerHTML = heading;
                for(i = 0; i < myArr.categories[j].movies.length; i++) {
                    out += '<div data-scroll class="itemsContainer"><div class="image"> <a href="' + myArr.categories[j].movies[i].link + '" class="darken"><img alt="' + myArr.categories[j].movies[i].name + '" title="' + myArr.categories[j].movies[i].name + '" src="images/' + myArr.categories[j].movies[i].poster + '" /></a></div><div class="play"><a href="' + myArr.categories[j].movies[i].link + '"><img src="images/play.png" width="50px" /></a></div></div>';
                }
                document.getElementById("id01").innerHTML = out;
            }
        </script>
        <footer>
            <script>
                smoothScroll.init();
            </script>
        </footer>
    </body>
</html>